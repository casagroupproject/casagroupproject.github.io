
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>city portfolio</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Template by FREEHTML5.CO" />
	<meta name="keywords" content="free html5, free template, free bootstrap, html5, css3, mobile first, responsive" />
	<meta name="author" content="FREEHTML5.CO" />

  <!-- 
	//////////////////////////////////////////////////////

	FREE HTML5 TEMPLATE 
	DESIGNED & DEVELOPED by FREEHTML5.CO
		
	Website: 		http://freehtml5.co/
	Email: 			info@freehtml5.co
	Twitter: 		http://twitter.com/fh5co
	Facebook: 		https://www.facebook.com/fh5co

	//////////////////////////////////////////////////////
	 -->

  <!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />


	<!-- Google Webfonts -->
	<link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet"> 
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Simple Line Icons -->
<!-- 	<link rel="stylesheet" href="css/simple-line-icons.css"> -->
	<!-- Theme Style -->
	<link rel="stylesheet" href="css/style.css">
	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->
	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Main JS -->
	<script src="js/main.js"></script>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/87/three.min.js"></script>
	<script src="js/OBJLoader.js"></script>
	<script src="js/STLLoader.js"></script>
	<script src="js/MTLLoader.js"></script>
	<script src="js/OrbitControls.js"></script>
	<script src="js/processing.min.js"></script>
	
	<style>

	/** {
		background-color:black;
	}*/
		#c {
			position: fixed;
			left: 0px;
			width: 100%;
			height: 100%;
			background-color:black
		}


		.fh5co-portfolio-figure .scene {
				width: 100%;
				height: 100%;
				display:flex;
		}

		.processing{
			display:flex;
			margin: 0;
   			padding: 0;
   			outline : none;
   			width: 100%;
		}



		/*** Works on common browsers ***/
::selection {
    background-color: #fdf894;
    color: white;
}

/*** Mozilla based browsers ***/
::-moz-selection {
    background-color: #fdf894;
    color: white;
}

/***For Other Browsers ***/
::-o-selection {
    background-color: #fdf894;
    color: white;
}

::-ms-selection {
    background-color: #fdf894;
    color: white;
}

/*** For Webkit ***/
::-webkit-selection {
    background-color: #fdf894;
    color: white;
}


	</style>


	</head>

	<body style="background-color:black">
		
	
	<canvas id="c"></canvas>

	<!-- <div id="fh5co-main" style="background-color:black"> -->
	<!-- 	<div class="fh5co-intro text-center">
			<div class="container">
				<div class="row">

					<div class="col-md-8 col-md-offset-2">
						<h1 class="intro-lead">Make something you love</h1>
						<h3 id="typedtext"></h3>
					</div>
				</div>
			</div>
		</div> -->

		<div id="fh5co-portfolio" style="background-color:black">
			<div class="fh5co-portfolio-item ">
				<!-- <div class="fh5co-portfolio-figure"></div> -->
				<div class="fh5co-portfolio-description">
					<h2>Sleepless Tokyo</h2>
					<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia.</p>
					<canvas class='processing' data-processing-sources="./assets/tokyo.pde"></canvas>
					<h5 style="padding-top:1em;">explore more</h5>
				</div>
			</div>
			<div class="fh5co-portfolio-item fh5co-img-right">
			<!-- <div class="fh5co-portfolio-figure"></div> -->
				<div class="fh5co-portfolio-description">
					<h2>Sleepless London</h2>
					<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia.</p>
					<canvas class='processing' data-processing-sources="./assets/tokyo.pde"></canvas>
					<h5>explore more</h5>
				</div>
			</div>
			<div class="fh5co-portfolio-item ">
			<!-- 	<div class="fh5co-portfolio-figure"></div> -->
				<div class="fh5co-portfolio-description">
					<h2>Sleepless Delhi</h2>
					<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia.</p>
					<canvas class='processing' data-processing-sources="./assets/tokyo.pde"></canvas>
					<h5>explore more</h5>
				</div>
			</div>
			<div class="fh5co-portfolio-item fh5co-img-right">
				<!-- <div class="fh5co-portfolio-figure"></div> -->
				<div class="fh5co-portfolio-description">
					<h2>Sleepless Stockholm</h2>
					<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia.</p>
					<canvas class='processing' data-processing-sources="./assets/tokyo.pde"></canvas>
					<h5>explore more</h5>
				</div>
			</div>
		</div>

		<script id="template" type="notjs">
			<div class="scene"></div>
			// <div class="description">Scene $</div>
		</script>

		<script>

			var canvas;

			var scenes = [],renderer;

			//external geometires
			var models = {
			  model1: {
			    obj: "./assets/test.stl",
			    mtl: "https://casagroupproject.github.io/template1/assets/Tent_Poles_01.mtl",
			    mesh: null
			  },
			  model2: {
			    obj: "./assets/test.stl",
			    mtl: "https://casagroupproject.github.io/template1/assets/Tent_Poles_01.mtl",
			    mesh: null
			  },
			   model3: {
			    obj: "./assets/test.stl",
			    mtl: "./assets/Pirateship.mtl",
			    mesh: null
			  }, 
			  model4: {
			    obj: "./assets/test.stl",
			    mtl: "https://casagroupproject.github.io/template1/assets/Tent_Poles_01.mtl",
			    mesh: null
			  }
			}

			// Meshes index
			//var meshes = {};


			init();
			animate();

			function init() {
			  //entire screen
			  canvas = document.getElementById("c");
			  //create array of internal geometries:
			  var template = document.getElementById("template").text;
			  
			  console.log('template-text',template);

			//left row (div)
			  var content = document.getElementsByClassName("fh5co-portfolio-item");
			//right row (div)
			  var content2 = document.getElementsByClassName("fh5co-portfolio-item fh5co-img-right");


			  var allElements = document.querySelectorAll('.fh5co-portfolio-item');
			  console.log('querySelectorAll',allElements[1]);

			   console.log('are these all elements',content2);

			  var gallery = document.getElementsByClassName("fh5co-portfolio-figure");
				
		
			  
			  	var objLoader = new THREE.STLLoader();
			  var counter = 0;

			  for (var _key in models) {
			    console.log('key first', _key);

			    //(function(key){

			    let scene = new THREE.Scene();
			    scene.background = new THREE.Color('rgb(0, 0, 0)');

				//left div
			    let element = document.createElement("div");
			    element.className = "fh5co-portfolio-figure";
			    element.innerHTML = template;
			    console.log('tempate replace', template);

			    //console.log('entire element', element);
			    //console.log('entire row', content);

			    scene.userData.element = element.querySelector(".scene");

			    ///console.log(element.querySelector(".scene"));

//if counter is 0 append left div, if counter is 1 append right div:
				//console.log('countermodulo', counter%2==0);
			if (counter%2==0){
				//console.log(element);
			    allElements[counter].appendChild(element);
			} else {
				allElements[counter].appendChild(element);
			}


			    console.log('newgallery',gallery[counter]);

			    let camera = new THREE.PerspectiveCamera(50, 1, 1, 10);
			    camera.position.z = 2;
			    scene.userData.camera = camera;

			    let controls = new THREE.OrbitControls(scene.userData.camera, scene.userData.element);
			    controls.minDistance = 2;
			    controls.maxDistance = 5;
			    controls.enablePan = true;
			    controls.enableZoom = true;
			    scene.userData.controls = controls;

			  //   objLoader.load(
			  //     // resource URL
			  //     models[_key].obj,
			  //     // called when resource is loaded
			  //     function(object) {
					// console.log('key second', _key);
			  //       scene.add(object);
			  //       console.log(object);

			  //     }
			  //   );
			  objLoader.load(models[_key].obj, function ( geometry ) {

			                    // material = new THREE.MeshPhongMaterial( { color: 0xfdf894, specular: 0x111111, shininess: 200 } );
			                    material = new THREE.MeshNormalMaterial( { color: 0xb28fce, specular: 0x111111, shininess: 200, emissive:0xfdf894} );
			                    mesh = new THREE.Mesh( geometry, material );
			                    //pos1:moves to the right if positive. pos2: goes up if positive, down if neg
			                    //mesh.position.set(100, 0, 0 );
			                    //mesh.rotation.set( 0, 0, 0 );
			                    mesh.scale.set( 0.01, 0.01, 0.01);
			                    //mesh.position(0,0,0);

			                    mesh.castShadow = true;
			                    mesh.receiveShadow = true;

			                    scene.add( mesh );
			                    //camera.lookAt(mesh.position);
			                 //get size of object
			           var box = new THREE.Box3().setFromObject(mesh);
			      //console.log( box.min, box.max, box.getSize() );
			      //console.log(mesh.position);

			                } );


			    scene.add(new THREE.HemisphereLight(0xaaaaaa, 0x444444));

			    var light = new THREE.DirectionalLight(0xffffff, 0.5);
			    light.position.set(1, 1, 1);
			    scene.add(light);
			    //console.log('scene number', scene);
			    scenes.push(scene);
			    counter ++;

			  }

			  renderer = new THREE.WebGLRenderer({
			    canvas: canvas,
			    antialias: true
			  });
			  renderer.setClearColor(0xffffff, 1);
			  renderer.setPixelRatio(window.devicePixelRatio);

			}

			function updateSize() {

			  var width = canvas.clientWidth;
			  var height = canvas.clientHeight;

			  if (canvas.width !== width || canvas.height !== height) {

			    renderer.setSize(width, height, false);

			  }

			}


			function animate() {

			  render();
			  requestAnimationFrame(animate);

			}

			function render() {

			  updateSize();

			  renderer.setClearColor(0xffffff);
			  renderer.setScissorTest(false);
			  renderer.clear();

			  renderer.setClearColor(0xe0e0e0);
			  renderer.setScissorTest(true);

			  scenes.forEach(function(scene) {

			    // so something moves
			    //scene.children[ 0 ].rotation.y = Date.now() * 0.001;

			    // get the element that is a place holder for where we want to
			    // draw the scene
			    var element = scene.userData.element;

			    // get its position relative to the page's viewport
			    var rect = element.getBoundingClientRect();

			    // check if it's offscreen. If so skip it
			    if (rect.bottom < 0 || rect.top > renderer.domElement.clientHeight ||
			      rect.right < 0 || rect.left > renderer.domElement.clientWidth) {

			      return; // it's off screen

			    }

			    // set the viewport
			    var width = rect.right - rect.left;
			    var height = rect.bottom - rect.top;
			    var left = rect.left;
			    var top = rect.top;

			    renderer.setViewport(left, top, width, height);
			    renderer.setScissor(left, top, width, height);

			    var camera = scene.userData.camera;

			    //camera.aspect = width / height; // not changing in this example
			    //camera.updateProjectionMatrix();

			    //scene.userData.controls.update();

			    renderer.render(scene, camera);

			  });

			}
	</script>
	<!-- <script src="./assets/typewriter.js"></script> -->

	
	</body>
</html>
